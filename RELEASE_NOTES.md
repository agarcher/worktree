Fix hooks appearing hung due to buffered output. Add safety checks to prevent deleting worktrees with uncommitted or unmerged changes. Improve shell wrapper communication using WT_CD_FILE env var.
